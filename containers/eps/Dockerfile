FROM debian:bookworm-slim

ARG DEBIAN_FRONTEND=noninteractive
ARG CONTAINER_USER
ARG CONTAINER_UID
ARG CONTAINER_GID
ARG BITCOIN_USER
ARG BITCOIN_PASSWORD
ARG BITCOIN_HOSTNAME
ARG BITCOIN_PORT

ENV CONTAINER_USER=${CONTAINER_USER}
ENV CONTAINER_UID=${CONTAINER_UID}
ENV CONTAINER_GID=${CONTAINER_GID}
ENV BITCOIN_USER=${BITCOIN_USER}
ENV BITCOIN_PASSWORD=${BITCOIN_PASSWORD}
ENV BITCOIN_HOSTNAME=${BITCOIN_HOSTNAME}
ENV BITCOIN_PORT=${BITCOIN_PORT}

ADD ./volume/scripts/user_setup.sh /scripts/user_setup.sh
ADD ./volume/scripts/init.sh /scripts/init.sh

RUN apt update && apt upgrade -y; \
  # apt install \
  /scripts/user_setup.sh ${CONTAINER_USER} ${CONTAINER_UID} ${CONTAINER_GID}

ENTRYPOINT ["/scripts/init.sh"] 
